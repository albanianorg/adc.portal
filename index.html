<!DOCTYPE html>
<html lang="sq">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
  <title>ADC Portal</title>
  <link rel="icon" type="image/png" href="adc.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <style>
    :root{
      --brand:#e60000;
      --brand-2:#c50000;
      --brand-light:#ff1a1a;
      --bg:#ffffff;
      --surface:#ffffff;
      --surface-elevated:#fafbfc;
      --muted:#64748b;
      --text:#0f172a;
      --line:#e2e8f0;
      --sidebar-bg:#f8fafc;
      --shadow:0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
      --shadow-md:0 4px 6px rgba(0,0,0,0.07), 0 2px 4px rgba(0,0,0,0.05);
      --shadow-lg:0 10px 15px rgba(0,0,0,0.08), 0 4px 6px rgba(0,0,0,0.05);
      --shadow-xl:0 20px 25px rgba(0,0,0,0.1), 0 10px 10px rgba(0,0,0,0.04);

      /* Ngjyrat e seksioneve */
      --vodafone:#e60000; --vodafone-light:#ff4444;
      --setup:#7c3aed; --setup-light:#a78bfa;
      --volton:#059669; --volton-light:#34d399;
      --albsig:#dc2626; --albsig-light:#f87171;
      --b2b:#ea580c; --b2b-light:#fb923c;
      --procedurat:#f59e0b; --procedurat-light:#fbbf24;
      --skripte:#0891b2; --skripte-light:#22d3ee;
      --reports:#2563eb; --reports-light:#60a5fa;
      --hr:#16a34a; --hr-light:#4ade80;
      --contracts:#dc2626; --contracts-light:#f87171;
    }
    
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0a0a0a;
        --surface:#18181b;
        --surface-elevated:#27272a;
        --line:#3f3f46;
        --text:#f1f5f9;
        --muted:#94a3b8;
        --sidebar-bg:#18181b;
        --shadow:0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
        --shadow-md:0 4px 6px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.3);
        --shadow-lg:0 10px 15px rgba(0,0,0,0.5), 0 4px 6px rgba(0,0,0,0.4);
        --shadow-xl:0 20px 25px rgba(0,0,0,0.6), 0 10px 10px rgba(0,0,0,0.5);
      }
    }

    *{box-sizing:border-box; margin:0; padding:0}
    html,body{height:100%; overflow-x:hidden;}
    body{
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.6;
    }

    /* Header - Clean & Minimal */
    header.appbar{
      position:sticky; top:0; z-index:50;
      display:flex; align-items:center; gap:20px;
      padding:16px 24px;
      background:var(--surface);
      border-bottom:1px solid var(--line);
      box-shadow:var(--shadow-md);
    }
    .appbar .brand{
      display:flex; align-items:center; gap:14px; cursor:pointer;
      transition:opacity .2s ease;
    }
    .appbar .brand:hover{opacity:.8}
    .appbar img{height:40px; width:auto}
    .appbar h1{
      font-size:20px; 
      font-weight:900; 
      background:linear-gradient(135deg, var(--brand) 0%, var(--brand-2) 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    .appbar .spacer{flex:1}
    .social-icons{display:flex; gap:12px; align-items:center}
    .social-icons a{
      color:var(--muted); 
      font-size:18px; 
      transition:all .2s ease;
      width:36px; 
      height:36px;
      display:flex; 
      align-items:center; 
      justify-content:center;
      border-radius:10px;
    }
    .social-icons a:hover{
      color:var(--brand); 
      background:var(--surface-elevated);
      transform:translateY(-2px);
    }

    /* Layout */
    .layout{
      display:grid; 
      grid-template-columns:280px 1fr; 
      min-height:calc(100vh - 72px);
      gap:0;
    }
    
    aside.sidebar{
      position:sticky; 
      top:72px;
      height:calc(100vh - 72px);
      overflow-y:auto;
      overflow-x:hidden;
      background:var(--sidebar-bg);
      border-right:1px solid var(--line);
      padding:20px 16px;
    }
    
    main.content{
      padding:32px;
      background:var(--bg);
      min-height:calc(100vh - 72px);
    }

    /* Sidebar Groups - Card Style */
    .group{
      margin-bottom:12px;
      border-radius:12px;
      overflow:hidden;
      background:var(--surface);
      border:1px solid var(--line);
      transition:all .2s ease;
    }
    
    .group:hover{
      box-shadow:var(--shadow-md);
      border-color:var(--muted);
    }

    .group summary{
      list-style:none; 
      cursor:pointer; 
      user-select:none;
      display:flex; 
      align-items:center; 
      gap:12px;
      padding:14px 16px; 
      font-weight:700;
      font-size:14px;
      color:var(--text);
      background:var(--surface);
      position:relative;
      transition:all .2s ease;
    }
    
    .group summary::-webkit-details-marker{display:none}
    
    .group summary:hover{
      background:var(--surface-elevated);
    }
    
    .group summary i{
      font-size:16px;
      width:20px;
      text-align:center;
    }
    
    .group summary::after{
      content:""; 
      position:absolute; 
      right:16px; 
      top:50%; 
      transform:translateY(-50%) rotate(0deg);
      width:8px; 
      height:8px; 
      border-right:2px solid var(--muted); 
      border-bottom:2px solid var(--muted);
      transition:transform .25s ease;
    }
    
    .group[open] summary::after{ 
      transform:translateY(-50%) rotate(45deg);
    }

    /* Icon Colors */
    .group[data-color="vodafone"] summary i{color:var(--vodafone)}
    .group[data-color="setup"] summary i{color:var(--setup)}
    .group[data-color="volton"] summary i{color:var(--volton)}
    .group[data-color="albsig"] summary i{color:var(--albsig)}
    .group[data-color="procedurat"] summary i{color:var(--procedurat)}
    .group[data-color="skripte"] summary i{color:var(--skripte)}
    .group[data-color="hr"] summary i{color:var(--hr)}
    .group[data-color="b2b"] summary i{color:var(--b2b)}
    .group[data-color="reports"] summary i{color:var(--reports)}
    .group[data-color="contracts"] summary i{color:var(--contracts)}

    /* Menu Items - Minimalist */
    .group .menu{
      padding:8px;
      display:grid; 
      gap:4px;
      background:var(--surface-elevated);
    }
    
    .group .menu button{
      width:100%; 
      text-align:left;
      padding:10px 12px; 
      border-radius:8px; 
      border:none;
      color:var(--text); 
      font-weight:600; 
      font-size:13px;
      cursor:pointer;
      background:transparent;
      transition:all .15s ease;
      position:relative;
      overflow:hidden;
    }
    
    .group .menu button::before{
      content:"";
      position:absolute;
      left:0;
      top:0;
      bottom:0;
      width:3px;
      background:currentColor;
      transform:scaleY(0);
      transition:transform .2s ease;
    }
    
    .group .menu button:hover{
      background:var(--surface);
      padding-left:16px;
    }
    
    .group .menu button:hover::before{
      transform:scaleY(1);
    }
    
    .group .menu button:active{
      transform:scale(0.98);
    }

    /* Apply colors to menu items */
    .group[data-color="vodafone"] .menu button{color:var(--vodafone)}
    .group[data-color="vodafone"] .menu button:hover{background:rgba(230,0,0,0.08)}
    
    .group[data-color="setup"] .menu button{color:var(--setup)}
    .group[data-color="setup"] .menu button:hover{background:rgba(124,58,237,0.08)}
    
    .group[data-color="volton"] .menu button{color:var(--volton)}
    .group[data-color="volton"] .menu button:hover{background:rgba(5,150,105,0.08)}
    
    .group[data-color="albsig"] .menu button{color:var(--albsig)}
    .group[data-color="albsig"] .menu button:hover{background:rgba(220,38,38,0.08)}
    
    .group[data-color="b2b"] .menu button{color:var(--b2b)}
    .group[data-color="b2b"] .menu button:hover{background:rgba(234,88,12,0.08)}
    
    .group[data-color="procedurat"] .menu button{color:var(--procedurat)}
    .group[data-color="procedurat"] .menu button:hover{background:rgba(245,158,11,0.08)}
    
    .group[data-color="skripte"] .menu button{color:var(--skripte)}
    .group[data-color="skripte"] .menu button:hover{background:rgba(8,145,178,0.08)}
    
    .group[data-color="hr"] .menu button{color:var(--hr)}
    .group[data-color="hr"] .menu button:hover{background:rgba(22,163,74,0.08)}
    
    .group[data-color="reports"] .menu button{color:var(--reports)}
    .group[data-color="reports"] .menu button:hover{background:rgba(37,99,235,0.08)}
    
    .group[data-color="contracts"] .menu button{color:var(--contracts)}
    .group[data-color="contracts"] .menu button:hover{background:rgba(220,38,38,0.08)}

    .menu button.active{
      background:var(--surface);
      font-weight:700;
    }

    /* Refresh Button */
    .refresh-btn{
      margin-top:16px; 
      width:100%;
      display:inline-flex; 
      align-items:center; 
      justify-content:center; 
      gap:8px;
      padding:12px; 
      border-radius:10px; 
      border:1px solid var(--line);
      background:var(--surface); 
      color:var(--text); 
      font-weight:700;
      font-size:13px;
      cursor:pointer;
      transition:all .2s ease;
    }
    
    .refresh-btn:hover{
      background:var(--surface-elevated);
      border-color:var(--muted);
      transform:translateY(-1px);
      box-shadow:var(--shadow-md);
    }
    
    .refresh-btn i{
      color:var(--brand);
    }

    /* Hero Section - Modern Gradient */
    .portal{max-width:1400px; margin:0 auto}
    
    .hero{
      position:relative;
      background:linear-gradient(135deg, 
        rgba(230,0,0,0.05) 0%, 
        rgba(230,0,0,0.02) 50%,
        transparent 100%),
        var(--surface);
      border:1px solid var(--line); 
      border-radius:20px; 
      padding:48px 40px; 
      margin-bottom:40px;
      overflow:hidden;
      box-shadow:var(--shadow-lg);
    }
    
    .hero::before{
      content:'';
      position:absolute;
      top:-100px;
      right:-100px;
      width:400px;
      height:400px;
      background:radial-gradient(circle, rgba(230,0,0,0.1) 0%, transparent 70%);
      border-radius:50%;
      pointer-events:none;
    }
    
    .hero-content{
      position:relative;
      z-index:1;
      max-width:800px;
    }
    
    .hero h2{
      margin:0 0 16px 0; 
      font-size:clamp(28px, 4vw, 42px);
      font-weight:900;
      line-height:1.2;
      background:linear-gradient(135deg, var(--brand) 0%, var(--brand-2) 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    
    .hero p{
      margin:0; 
      color:var(--muted);
      font-size:clamp(16px, 2vw, 18px);
      line-height:1.7;
    }

    /* Search - Clean Design */
    .search-wrap{margin-top:32px; display:grid; gap:16px}
    
    .search-bar{
      display:flex; 
      gap:12px;
      background:var(--surface);
      padding:8px;
      border-radius:14px;
      border:2px solid var(--line);
      box-shadow:var(--shadow-md);
      transition:all .2s ease;
    }
    
    .search-bar:focus-within{
      border-color:var(--brand);
      box-shadow:var(--shadow-lg), 0 0 0 3px rgba(230,0,0,0.1);
    }
    
    .search-bar input{
      flex:1; 
      padding:12px 16px; 
      border:none; 
      border-radius:10px; 
      outline:none; 
      font-weight:500;
      font-size:15px;
      background:transparent;
      color:var(--text);
    }
    
    .search-bar input::placeholder{
      color:var(--muted);
    }
    
    .search-bar button{
      padding:12px 24px; 
      border-radius:10px; 
      border:none; 
      background:var(--brand);
      color:#fff;
      cursor:pointer; 
      font-weight:700;
      font-size:15px;
      transition:all .2s ease;
      box-shadow:0 4px 12px rgba(230,0,0,0.25);
    }
    
    .search-bar button:hover{
      background:var(--brand-2);
      transform:translateY(-2px);
      box-shadow:0 6px 16px rgba(230,0,0,0.3);
    }
    
    .search-bar button:active{
      transform:translateY(0);
    }
    
    #search-stats{
      color:var(--muted); 
      font-size:14px;
      font-weight:600;
    }
    
    .results{display:grid; gap:12px; margin-top:16px}
    
    .result{
      background:var(--surface); 
      border:1px solid var(--line); 
      border-left:4px solid var(--brand);
      border-radius:12px; 
      padding:20px; 
      box-shadow:var(--shadow);
      transition:all .2s ease;
    }
    
    .result:hover{
      transform:translateY(-2px);
      box-shadow:var(--shadow-lg);
      border-left-width:6px;
    }
    
    .result h4{
      margin:0 0 8px 0; 
      font-weight:700;
      color:var(--text);
      font-size:16px;
    }
    
    .result .meta{
      color:var(--muted); 
      font-size:13px; 
      margin-bottom:12px;
      font-weight:500;
    }
    
    .result button{
      padding:8px 16px;
      border:1px solid var(--line);
      border-radius:8px;
      background:var(--surface);
      color:var(--text);
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      transition:all .2s ease;
    }
    
    .result button:hover{
      background:var(--brand);
      color:#fff;
      border-color:var(--brand);
      transform:translateY(-1px);
      box-shadow:var(--shadow-md);
    }
    
    .hl{
      background:rgba(230,0,0,0.15); 
      padding:2px 4px; 
      border-radius:4px; 
      font-weight:700;
      color:var(--brand);
    }

    /* Quick Links - Card Grid */
    .quick{
      margin-top:32px; 
      display:grid; 
      grid-template-columns:repeat(auto-fill,minmax(300px,1fr)); 
      gap:16px;
    }
    
    .qcard{
      position:relative;
      background:var(--surface); 
      border:1px solid var(--line); 
      border-radius:12px; 
      padding:24px; 
      box-shadow:var(--shadow);
      transition:all .3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow:hidden;
    }
    
    .qcard::before{
      content:'';
      position:absolute;
      top:0;
      left:0;
      width:100%;
      height:4px;
      background:linear-gradient(90deg, var(--brand) 0%, var(--brand-2) 100%);
      transform:scaleX(0);
      transform-origin:left;
      transition:transform .3s ease;
    }
    
    .qcard:hover{
      transform:translateY(-4px); 
      box-shadow:var(--shadow-xl);
      border-color:var(--brand);
    }
    
    .qcard:hover::before{
      transform:scaleX(1);
    }
    
    .qcard a{
      display:flex;
      align-items:center;
      justify-content:space-between;
      text-decoration:none; 
      color:var(--text); 
      font-weight:700;
      font-size:15px;
      transition:all .2s ease;
    }
    
    .qcard a:hover{
      color:var(--brand);
    }
    
    .qcard a i{
      font-size:16px;
      color:var(--brand);
      transition:transform .2s ease;
    }
    
    .qcard:hover a i{
      transform:translateX(4px);
    }

    /* Updates Section */
    h3{
      margin:32px 0 20px 0; 
      font-weight:800; 
      font-size:24px;
      color:var(--text);
    }
    
    .updates-grid{
      display:grid; 
      grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); 
      gap:16px;
    }
    
    .update-card{
      background:var(--surface); 
      border:1px solid var(--line); 
      border-radius:12px; 
      padding:20px; 
      box-shadow:var(--shadow);
      transition:all .2s ease;
    }
    
    .update-card:hover{
      transform:translateY(-2px);
      box-shadow:var(--shadow-lg);
    }
    
    .tag{
      display:inline-block; 
      padding:4px 12px; 
      border-radius:6px; 
      font-size:11px; 
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:0.5px;
      background:rgba(230,0,0,0.1);
      color:var(--brand);
      border:1px solid rgba(230,0,0,0.2);
    }
    
    .update-card a{
      display:inline-flex;
      align-items:center;
      gap:6px;
      color:var(--brand);
      font-weight:700;
      font-size:14px;
      text-decoration:none;
      transition:all .2s ease;
    }
    
    .update-card a:hover{
      gap:10px;
      color:var(--brand-2);
    }

    /* Content Viewer */
    .viewer{
      position:relative; 
      height:85vh; 
      border:1px solid var(--line); 
      border-radius:16px; 
      overflow:hidden; 
      background:var(--surface); 
      box-shadow:var(--shadow-xl);
    }
    
    .viewer iframe{
      position:absolute; 
      inset:0; 
      width:100%; 
      height:100%; 
      border:0;
    }
    
    .loader{
      position:absolute; 
      inset:0; 
      display:flex; 
      align-items:center; 
      justify-content:center; 
      gap:12px;
      background:var(--surface);
      backdrop-filter:blur(8px); 
      font-weight:700; 
      color:var(--text);
      font-size:14px;
    }
    
    .dot{
      width:8px;
      height:8px;
      border-radius:50%;
      background:var(--brand);
      animation:bounce .8s infinite alternate ease-in-out;
    }
    
    .dot:nth-child(2){animation-delay:.1s}
    .dot:nth-child(3){animation-delay:.2s}
    
    @keyframes bounce{
      to{transform:translateY(-10px); opacity:.4}
    }

    /* Backdrop */
    .backdrop{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.5);
      z-index:99;
      backdrop-filter:blur(4px);
      animation:fadeIn .2s ease;
    }
    
    .backdrop.show{display:block}
    
    @keyframes fadeIn{
      from{opacity:0} 
      to{opacity:1}
    }

    /* Mobile Toggle */
    .toggle{display:none}

    /* Scrollbar */
    ::-webkit-scrollbar{
      width:10px;
      height:10px;
    }
    
    ::-webkit-scrollbar-track{
      background:var(--surface);
    }
    
    ::-webkit-scrollbar-thumb{
      background:var(--line);
      border-radius:5px;
      border:2px solid var(--surface);
    }
    
    ::-webkit-scrollbar-thumb:hover{
      background:var(--muted);
    }

    html{scroll-behavior:smooth}

    /* ========== RESPONSIVE ========== */
    @media (max-width: 1024px){
      .layout{grid-template-columns:1fr}
      
      aside.sidebar{
        position:fixed; 
        top:72px; 
        left:0; 
        right:0; 
        height:auto; 
        max-height:80vh; 
        transform:translateY(-110%); 
        transition:transform .3s cubic-bezier(0.4, 0, 0.2, 1);
        z-index:100;
        border-radius:0 0 20px 20px;
        box-shadow:var(--shadow-xl);
        border-right:none;
        border-bottom:1px solid var(--line);
      }
      
      aside.sidebar.open{
        transform:translateY(0);
      }
      
      .toggle{
        display:inline-flex; 
        align-items:center; 
        gap:8px; 
        border:1px solid var(--line); 
        background:var(--surface); 
        color:var(--text); 
        padding:10px 16px; 
        border-radius:10px; 
        font-weight:700;
        font-size:14px;
        cursor:pointer;
        transition:all .2s ease;
      }
      
      .toggle:hover{
        background:var(--surface-elevated);
        border-color:var(--muted);
      }
      
      main.content{padding:24px 16px}
      
      .hero{
        padding:32px 24px;
        margin-bottom:32px;
      }
      
      .search-bar{
        flex-direction:column;
      }
      
      .quick{
        grid-template-columns:1fr;
      }
      
      .updates-grid{
        grid-template-columns:1fr;
      }
    }

    @media (max-width: 640px){
      .appbar{padding:12px 16px}
      .appbar h1{display:none}
      .appbar img{height:36px}
      
      main.content{padding:20px 12px}
      
      .hero{
        padding:24px 20px;
      }
      
      .hero h2{font-size:24px}
      .hero p{font-size:15px}
      
      .social-icons{gap:8px}
      .social-icons a{
        width:32px;
        height:32px;
        font-size:16px;
      }
    }
  </style>
</head>
<body>
  <!-- Backdrop for mobile sidebar -->
  <div class="backdrop" id="backdrop" onclick="closeSidebar()"></div>

  <!-- Header -->
  <header class="appbar" role="banner">
    <div class="brand" onclick="resetToMain()" title="Kthehu në faqen kryesore">
      <img src="logo.png" alt="ADC Logo" />
      <h1>ADC Portal</h1>
    </div>
    <div class="spacer"></div>
    <button class="toggle" aria-expanded="false" aria-controls="sidebar" onclick="toggleSidebar(this)">
      <i class="fa-solid fa-bars"></i> Menu
    </button>
    <nav class="social-icons" aria-label="Rrjetet sociale">
      <a href="https://www.facebook.com" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="https://www.instagram.com/albanian_development_company?igsh=bXRobW45bmU0NWhm" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://www.linkedin.com/company/albanian-development-company/posts/?feedView=all" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
    </nav>
  </header>

  <div class="layout">
    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar" aria-label="Navigimi anësor">

      <details class="group" data-color="vodafone" open>
        <summary><i class="fas fa-mobile-alt"></i> Vodafone</summary>
        <div class="menu">
          <button onclick="loadPage(this,'vodafone-internet-fiks-individ.html')">Fix Residencial</button>
          <button onclick="loadPage(this,'vodafone_tariff_comparison.html')">Fix Business</button>
          <button onclick="loadPage(this,'faqe_vodafone.html')">Ofertat Residencial</button>
          <button onclick="loadPage(this,'planet_tarifore_biznes.html')">Planet Mobile Business</button>
          <button onclick="loadPage(this,'Planet-standarde-biznes.html')">Planet Mobile Standard</button>
          <button onclick="loadPage(this,'Mobile_Tool.html')">Tariff Migration Tool</button>
          <button onclick="loadPage(this,'paketat_vodafone_interaktive_finale.html')">Kanalet Televizive</button>
        </div>
      </details>

      <details class="group" data-color="setup">
        <summary><i class="fas fa-cogs"></i> Setup</summary>
        <div class="menu">
          <button onclick="loadPage(this,'sherbimet_dhe_pikat_forta.html')">Set/Up service</button>
          <button onclick="loadPage(this,'setup_script.html')">Set/Up script</button>
          <button onclick="loadPage(this,'preventiv_website.html')">Website tariffs</button>
          <button onclick="loadPage(this,'setup-dashboard.html')">Selling IT service</button>
          <button onclick="loadPageExternal('https://setup.al/about-us/')">Set/Up web</button>
        </div>
      </details>

      <details class="group" data-color="volton">
        <summary><i class="fas fa-bolt"></i> Volton</summary>
        <div class="menu">
          <button onclick="loadPage(this,'Calculator-Volton.html')">Volton Calculator</button>
          <button onclick="loadPage(this,'faq_volton.html')">Volton FAQ</button>
          <button onclick="loadPageExternal('https://volton.al/')">Volton Website</button>
        </div>
      </details>

      <details class="group" data-color="albsig">
        <summary><i class="fas fa-shield-alt"></i> Albsig</summary>
        <div class="menu">
          <button onclick="loadPage(this,'Albsig.html')">Siguracionet</button>
          <button onclick="loadPage(this,'sigurime_akomodimi.html')">Çmimet e Siguracioneve</button>
          <button onclick="loadPage(this,'Sigurimi_prones.html')">Kalkulatori Siguracionit</button>
          <button onclick="loadPageExternal('https://www.albsig.al/')">Albsig Website</button>
          <button onclick="loadPageExternal('https://web.albsig.al/en/#/policy/tpl/form/0')">Siguracioni TPL</button>
          <button onclick="loadPageExternal('https://web.albsig.al/en/#/kasko-insurance/form')">Siguracioni Casco</button>
        </div>
      </details>

      <details class="group" data-color="procedurat">
        <summary><i class="fas fa-file-alt"></i> Procedurat</summary>
        <div class="menu">
          <button onclick="loadPage(this,'Documentation.html')">Documentation</button>
          <button onclick="loadPage(this,'proceset_agjentit_tlm_final.html')">TLM processes</button>
          <button onclick="loadPageExternal('https://forms.office.com/e/JdsFWi6MFh')">Agent test form</button>
          <button onclick="window.open('Logjistike.html','_blank')">Logistic</button>
        </div>
      </details>

      <details class="group" data-color="skripte">
        <summary><i class="fas fa-scroll"></i> Skripte</summary>
        <div class="menu">
          <button onclick="loadPage(this,'skripti_per_shitje.html')">Scripte për shitje</button>
          <button onclick="loadPage(this,'manual_telesales_perditesuar.html')">Scripte për shitje 2</button>
          <button onclick="loadPage(this,'skripte_kliente_skeptike.html')">Scripte për shitje 3</button>
          <button onclick="loadPage(this,'help.html')">Help</button>
        </div>
      </details>

      <details class="group" data-color="hr">
        <summary><i class="fas fa-users"></i> Burimet Njerezore</summary>
        <div class="menu">
          <button onclick="loadPageExternal('https://adc.al/careers')">Vacancies</button>
          <button onclick="loadPageExternal('Attendance.html')">Attendance</button>
        </div>
      </details>

      <details class="group" data-color="b2b">
        <summary><i class="fas fa-briefcase"></i> Business 2 Business</summary>
        <div class="menu">
          <button onclick="loadPage(this,'vodafone_operator_csp.html')">Office 365 Special</button>
          <button onclick="loadPage(this,'NCE Microsoft Office 365 Customer Presentation (002).pdf')">Office 365</button>
          <button onclick="loadPage(this,'Prezantim Klienti - Vodafone Business Online.pdf')">Business Online</button>
          <button onclick="loadPage(this,'business_on_the_go_vodafone.html')">BusinessOntheGO</button>
        </div>
      </details>

      <details class="group" data-color="reports">
        <summary><i class="fas fa-folder-open"></i> Reports</summary>
        <div class="menu">
          <button onclick="loadPage(this,'raport-update-2.html')">Sales Reports</button>
          <button onclick="loadPage(this,'lead_txt_to_report_multifile_filters_charts.html')">TLM Reports</button>
          <button onclick="loadPage(this,'info.extract.html')">Extract pdf</button>
          <button onclick="window.open('roadmap2.html','_blank')">TLM Roadmap</button>
        </div>
      </details>

      <details class="group" data-color="contracts">
        <summary><i class="fas fa-folder-open"></i> Contracts & Forms</summary>
        <div class="menu">
          <button onclick="loadPage(this,'Forms&Contracts.html')">Contracts & Forms</button>
        </div>
      </details>

      <button class="refresh-btn" onclick="refreshAndCloseMenus()">
        <i class="fas fa-sync-alt"></i> Rifresko & Mbyll Menutë
      </button>
    </aside>

    <!-- Main content -->
    <main class="content" id="content">
      <div class="portal" id="home">
        <section class="hero" role="region" aria-label="Mirë se vini">
          <div class="hero-content">
            <h2>Mirë se vini në ADC Portal</h2>
            <p>Platformë e centralizuar për të gjitha mjetet dhe informacionet që ju duhen për punën e përditshme. Eksploroni shërbimet tona dhe gjeni zgjidhjen e duhur për klientët tuaj.</p>
          </div>
        </section>

        <!-- SEARCH në faqen kryesore -->
        <section class="search-wrap" aria-label="Kërko në përmbajtje">
          <div class="search-bar">
            <input id="q" type="search" placeholder="Kërko në të gjitha faqet (p.sh. 'Planet Business', 'Volton', 'kontratë'…)" />
            <button onclick="runSearch()"><i class="fas fa-search"></i> Kërko</button>
          </div>
          <div id="search-stats"></div>
          <div id="results" class="results"></div>
        </section>

        <!-- Lidhje të shpejta -->
        <section class="quick" aria-label="Lidhje të shpejta">
          <div class="qcard">
            <a href="#" onclick="return openHome(event,'faqe_vodafone.html')">
              Ofertat Fix Rezidencial <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <div class="qcard">
            <a href="#" onclick="return openHome(event,'faq_volton.html')">
              Volton FAQ <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <div class="qcard">
            <a href="#" onclick="return openHome(event,'sherbimet_dhe_pikat_forta.html')">
              Setup Service <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <div class="qcard">
            <a href="#" onclick="return openHome(event,'proceset_agjentit_tlm_final.html')">
              Proceset Vodafone <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <div class="qcard">
            <a href="#" onclick="return openHome(event,'Albsig.html')">
              Siguracionet Albsig <i class="fas fa-arrow-right"></i>
            </a>
          </div>
          <div class="qcard">
            <a href="#" onclick="return openHome(event,'https://adc.al/careers')">
              Pozicione të lira <i class="fas fa-external-link-alt"></i>
            </a>
          </div>
        </section>

        <!-- Updates & Njoftime -->
        <section aria-label="Updates & Njoftime">
          <h3>Updates & Njoftime</h3>
          <div id="updates" class="updates-grid"></div>
        </section>
      </div>

      <div id="viewer" class="viewer" hidden>
        <div class="loader" id="loader" aria-live="polite">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          <span>Po ngarkohet…</span>
        </div>
        <iframe id="frame" title="Përmbajtja" src=""></iframe>
      </div>
    </main>
  </div>

  <script>
    /* ======= Sidebar & Viewer ======= */
    function toggleSidebar(btn){
      const sidebar = document.getElementById('sidebar');
      const backdrop = document.getElementById('backdrop');
      const open = !sidebar.classList.contains('open');
      sidebar.classList.toggle('open', open);
      backdrop.classList.toggle('show', open);
      if(btn){ btn.setAttribute('aria-expanded', String(open)); }
      
      if(window.innerWidth <= 1024){
        document.body.style.overflow = open ? 'hidden' : '';
      }
    }
    
    function closeSidebar(){
      const sidebar = document.getElementById('sidebar');
      const backdrop = document.getElementById('backdrop');
      sidebar.classList.remove('open');
      backdrop.classList.remove('show');
      document.body.style.overflow = '';
      const toggleBtn = document.querySelector('.toggle');
      if(toggleBtn){ toggleBtn.setAttribute('aria-expanded', 'false'); }
    }
    
    function closeAllMenus(){ 
      document.querySelectorAll('aside details').forEach(d=>{ d.open=false; }); 
    }

    function showViewer(){ 
      document.getElementById('home').hidden = true; 
      document.getElementById('viewer').hidden = false; 
    }
    function showHome(){ 
      document.getElementById('viewer').hidden = true; 
      document.getElementById('home').hidden = false; 
    }
    function setActive(btn){
      document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
      if(btn){ btn.classList.add('active'); }
    }

    /* Router helpers */
    let _suppressPush = false;
    function pushRoute(state){
      if(_suppressPush) return;
      const urlPart = state.view === 'home' ? '#/home' : '#/page/' + encodeURIComponent(state.url);
      history.pushState(state, '', urlPart);
    }
    function applyState(state){
      if(!state || state.view === 'home'){
        setActive(null); showHome(); closeAllMenus();
        const frame = document.getElementById('frame');
        const loader = document.getElementById('loader');
        if(frame) frame.src = '';
        if(loader) loader.style.display = 'none';
        return;
      }
      if(state.view === 'page' && state.url){
        showViewer();
        const frame = document.getElementById('frame');
        const loader = document.getElementById('loader');
        loader.style.display = 'flex';
        requestAnimationFrame(()=>{ frame.src = state.url; });
        frame.onload = ()=> loader.style.display = 'none';
        frame.onerror = ()=> {
          loader.style.display = 'none';
          window.open(state.url, '_blank', 'noopener');
        };
        closeSidebar();
      }
    }
    function parseHashToState(){
      const h = location.hash || '';
      if(h.startsWith('#/page/')){
        const url = decodeURIComponent(h.slice('#/page/'.length));
        return {view:'page', url};
      }
      return {view:'home'};
    }
    function initRouter(){
      const initial = parseHashToState();
      history.replaceState(initial, '', location.href);
      applyState(initial);
      window.addEventListener('popstate', (e)=>{
        _suppressPush = true;
        applyState(e.state || parseHashToState());
        _suppressPush = false;
      });
    }

    function loadPage(btn, url){
      setActive(btn);
      showViewer();
      closeSidebar();
      const frame = document.getElementById('frame');
      const loader = document.getElementById('loader');
      loader.style.display = 'flex';
      requestAnimationFrame(()=>{ frame.src = url; });
      frame.onload = () => { loader.style.display = 'none'; };
      frame.onerror = () => {
        loader.style.display = 'none';
        window.open(url, '_blank', 'noopener');
      };
      pushRoute({view:'page', url});
    }

    function refreshAndCloseMenus(){ resetToMain(); }
    function loadPageExternal(url){ window.open(url, '_blank', 'noopener'); }
    function resetToMain(){
      setActive(null); showHome(); closeAllMenus(); closeSidebar();
      window.scrollTo({top:0, behavior:'smooth'});
      const frame = document.getElementById('frame'); 
      const loader = document.getElementById('loader');
      if(frame) frame.src = '';
      if(loader) loader.style.display = 'none';
      pushRoute({view:'home'});
    }

    function openHome(e, url){
      if(e) e.preventDefault();
      loadPage(null, url);
      return false;
    }
    function openUpdate(e, url){
      if(e) e.preventDefault();
      loadPage(null, url);
      return false;
    }

    /* ======= SEARCH ======= */
    const PAGES = [
      {title:"Vodafone · Fix Residencial", url:"vodafone-internet-fiks-individ.html", updated:"2025-08-01"},
      {title:"Vodafone · Fix Business", url:"vodafone_tariff_comparison.html", updated:"2025-07-20"},
      {title:"Vodafone · Ofertat Residencial", url:"faqe_vodafone.html", updated:"2025-08-11"},
      {title:"Internet Calculator", url:"Internet-Speed.html", updated:"2025-06-15"},
      {title:"Planet Mobile Business", url:"planet_tarifore_biznes.html", updated:"2025-05-30"},
      {title:"Planet Mobile Standard", url:"Planet-standarde-biznes.html", updated:"2025-05-30"},
      {title:"Kanalet Televizive", url:"paketat_vodafone_interaktive_finale.html", updated:"2025-04-12"},
      {title:"Setup · Service", url:"sherbimet_dhe_pikat_forta.html", updated:"2025-07-10"},
      {title:"Setup · Script", url:"setup_script.html", updated:"2025-07-01"},
      {title:"Website tariffs", url:"preventiv_website.html", updated:"2025-06-10"},
      {title:"Selling IT service", url:"setup-dashboard.html", updated:"2025-06-22"},
      {title:"Albsig · Siguracionet", url:"Albsig.html", updated:"2025-03-02"},
      {title:"Albsig · Çmimet e Siguracioneve", url:"sigurime_akomodimi.html", updated:"2025-05-05"},
      {title:"Procedurat · Documentation", url:"Documentation.html", updated:"2025-02-15"},
      {title:"Procedurat · TLM processes", url:"proceset_agjentit_tlm_final.html", updated:"2025-08-05"},
      {title:"B2B · Office 365 Special", url:"vodafone_operator_csp.html", updated:"2025-02-01"},
      {title:"B2B · Office 365 (PDF)", url:"NCE Microsoft Office 365 Customer Presentation (002).pdf", updated:"2024-12-01", pdf:true},
      {title:"B2B · Business Online (PDF)", url:"Prezantim Klienti - Vodafone Business Online.pdf", updated:"2024-12-01", pdf:true},
      {title:"BusinessOnTheGO", url:"business_on_the_go_vodafone.html", updated:"2025-01-12"},
      {title:"Contracts & Forms", url:"Forms&Contracts.html", updated:"2025-03-18"},
      {title:"Volton · FAQ", url:"faq_volton.html", updated:"2025-08-07"},
      {title:"Volton · Calculator", url:"Calculator-Volton.html", updated:"2025-08-03"}
    ];

    const INDEX = new Map();
    let indexing = false;

    async function buildIndex(){
      if(indexing || INDEX.size === PAGES.length) return;
      indexing = true;
      for(const p of PAGES){
        try{
          if(p.pdf){ INDEX.set(p.url, {title:p.title, text:"", updated:p.updated, pdf:true}); continue; }
          const res = await fetch(p.url, {cache:'no-store'});
          const html = await res.text();
          const text = extractPlainText(html);
          INDEX.set(p.url, {title:p.title, text, updated:p.updated, pdf:false});
        }catch(e){
          INDEX.set(p.url, {title:p.title, text:"", updated:p.updated, pdf: !!p.pdf});
        }
      }
      indexing = false;
    }
    
    function extractPlainText(html){
      const tmp = document.createElement('div');
      tmp.innerHTML = html.replace(/<script[\s\S]*?<\/script>/gi,'').replace(/<style[\s\S]*?<\/style>/gi,'');
      const text = tmp.textContent || tmp.innerText || "";
      return text.replace(/\s+/g,' ').trim();
    }
    
    function highlight(text, q){
      const esc = q.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
      return text.replace(new RegExp(esc,'gi'), m=>`<span class="hl">${m}</span>`);
    }
    
    function snippet(text, q, len=140){
      const i = text.toLowerCase().indexOf(q.toLowerCase());
      if(i===-1) return text.slice(0, len) + (text.length>len?'…':'');
      const start = Math.max(0, i - Math.floor(len/2));
      const end = Math.min(text.length, start + len);
      const slice = text.slice(start, end);
      return (start>0?'…':'') + highlight(slice, q) + (end<text.length?'…':'');
    }

    let searchDebounce;
    document.getElementById('q').addEventListener('input', ()=>{
      clearTimeout(searchDebounce);
      searchDebounce = setTimeout(()=> runSearch(), 200);
    });

    async function runSearch(){
      const q = document.getElementById('q').value.trim();
      const statsEl = document.getElementById('search-stats');
      const resEl = document.getElementById('results');

      if(!q){ statsEl.textContent = ""; resEl.innerHTML = ""; return; }

      buildIndex();

      const results = [];
      for(const p of PAGES){
        const item = INDEX.get(p.url);
        if(!item) continue;
        const hay = (p.title + " " + item.text).toLowerCase();
        if(hay.includes(q.toLowerCase())){
          const sn = item.text ? snippet(item.text, q) : '(PDF / pa tekst të disponueshëm)';
          results.push({ title:p.title, url:p.url, updated:p.updated, snippet:sn, pdf:!!p.pdf });
        }
      }

      if(!results.length && INDEX.size===0){
        statsEl.textContent = "Po përgatitet indeksi… provo sërish pas pak sekondash.";
        resEl.innerHTML = ""; return;
      }

      results.sort((a,b)=> b.updated.replace(/-/g,'').localeCompare(a.updated.replace(/-/g,'')));
      statsEl.textContent = `${results.length} rezultat(e)`;
      resEl.innerHTML = results.map(r=>`
        <div class="result">
          <h4>${r.title} ${r.pdf?'<span class="tag">PDF</span>':''}</h4>
          <div class="meta">Përditësuar: ${r.updated || '-'}</div>
          <div style="margin-top:8px; color:var(--muted)">${r.snippet}</div>
          <div style="margin-top:12px">
            <button onclick="loadPage(null,'${r.url}')">
              <i class="fas fa-external-link-alt"></i> Hap
            </button>
          </div>
        </div>
      `).join('');
    }

    /* ======= Updates ======= */
    const UPDATES = [
      {date:"2025-08-11", type:"Update", title:"Ofertat Vodafone (Residencial) u përditësuan", link:"faqe_vodafone.html"},
      {date:"2025-08-07", type:"Release", title:"Volton FAQ i rifreskuar", link:"faq_volton.html"},
      {date:"2025-08-03", type:"Tool", title:"Volton Calculator v1.2", link:"Calculator-Volton.html"},
      {date:"2025-07-20", type:"Update", title:"Fix Business tarifat: krahasimi i ri", link:"vodafone_tariff_comparison.html"},
      {date:"2025-07-10", type:"Notice", title:"Set/Up Service: përditësime në paketat", link:"sherbimet_dhe_pikat_forta.html"}
    ];
    
    function renderUpdates(){
      const wrap = document.getElementById('updates');
      if(!wrap) return;
      const items = [...UPDATES].sort((a,b)=> b.date.localeCompare(a.date));
      wrap.innerHTML = items.map(u=>`
        <div class="update-card">
          <div class="meta" style="color:var(--muted);font-size:13px;margin-bottom:6px;font-weight:500">${u.date}</div>
          <div style="margin-bottom:8px"><span class="tag">${u.type}</span></div>
          <div style="font-weight:700;margin-bottom:10px;color:var(--text)">${u.title}</div>
          ${u.link ? `<div>
            <a href="#" onclick="return openUpdate(event,'${u.link}')">
              Shiko më shumë <i class="fas fa-arrow-right"></i>
            </a>
          </div>` : ''}
        </div>
      `).join('');
    }

    window.addEventListener('resize', ()=>{
      if(window.innerWidth > 1024){
        closeSidebar();
        document.body.style.overflow = '';
      }
    });

    document.addEventListener('DOMContentLoaded', ()=>{
      initRouter();
      buildIndex();
      renderUpdates();
    });
  </script>

  <script>
  (function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="a5W5MKC2pqARkls71UKeB";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
  </script>

</body>
</html>
